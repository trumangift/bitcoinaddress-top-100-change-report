<!DOCTYPE html>
<html>
    <head>
      <script src="./echarts-all.js"></script>
      <script src="./series.js"></script>
    </head>
    <body>
        <div id="main" style="width: 100%;height: 3000px;">
        </div>
    </body>
    <script>

    function readTextFile(file, callback)
    {
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function ()
        {
            if(rawFile.readyState === 4)
            {
                if(rawFile.status === 200 || rawFile.status == 0)
                {
                    var allText = rawFile.responseText;
                    callback(allText);
                }
            }
        }
        rawFile.send(null);
    }
    readTextFile('/json', (data) => {
                // 基于准备好的dom，初始化echarts实例
                var myChart = echarts.init(document.getElementById('main'));
                data = JSON.parse(data);
                const xAxis = Object.keys(data);
                const size = 19;
                // 指定图表的配置项和数据
                const ss = series(data, xAxis);
                var option = {
                    title: {
                        text: '比特币财富报表'
                    },
                    tooltip: {
                        trigger: 'item',
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: xAxis,
                    },
                    yAxis: {
                        type: 'value'
                    },
                    series: ss,
                    toolbox: {
                        feature: {
                            saveAsImage: {}
                        }
                    },
                };
                myChart.setOption(option)
    });
    </script>
</html>
